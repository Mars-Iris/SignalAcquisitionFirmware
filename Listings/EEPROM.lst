C51 COMPILER V9.56.0.0   EEPROM                                                            10/17/2022 09:56:18 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE EEPROM
OBJECT MODULE PLACED IN .\Objects\EEPROM.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Source\EEPROM.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\List
                    -ings\EEPROM.lst) TABS(2) OBJECT(.\Objects\EEPROM.obj)

line level    source

   1          #include "config.h"
*** WARNING C318 IN LINE 1 OF Source\EEPROM.c: can't open file 'config.h'
   2          #include "eeprom.h"
*** WARNING C318 IN LINE 2 OF Source\EEPROM.c: can't open file 'eeprom.h'
   3          #include "intrins.h"
   4          #define CMD_IDLE    0               //空闲模式
   5          #define CMD_READ    1               //IAP字节读命令
   6          #define CMD_PROGRAM 2               //IAP字节编程命令
   7          #define CMD_ERASE   3               //IAP扇区擦除命令
   8          //#define ENABLE_IAP 0x80           //if SYSCLK<30MHz
   9          //#define ENABLE_IAP 0x81           //if SYSCLK<24MHz
  10          #define ENABLE_IAP  0x82            //if SYSCLK<20MHz
  11          //#define ENABLE_IAP 0x83           //if SYSCLK<12MHz
  12          //#define ENABLE_IAP 0x84           //if SYSCLK<6MHz
  13          //#define ENABLE_IAP 0x85           //if SYSCLK<3MHz
  14          //#define ENABLE_IAP 0x86           //if SYSCLK<2MHz
  15          //#define ENABLE_IAP 0x87           //if SYSCLK<1MHz
  16          void IapIdle()
  17          {
  18   1          IAP_CONTR = 0;                  //关闭IAP功能
*** ERROR C202 IN LINE 18 OF Source\EEPROM.c: 'IAP_CONTR': undefined identifier
  19   1          IAP_CMD = 0;                    //清除命令寄存器
*** ERROR C202 IN LINE 19 OF Source\EEPROM.c: 'IAP_CMD': undefined identifier
  20   1          IAP_TRIG = 0;                   //清除触发寄存器
*** ERROR C202 IN LINE 20 OF Source\EEPROM.c: 'IAP_TRIG': undefined identifier
  21   1          IAP_ADDRH = 0x80;               //将地址设置到非IAP区域
*** ERROR C202 IN LINE 21 OF Source\EEPROM.c: 'IAP_ADDRH': undefined identifier
  22   1          IAP_ADDRL = 0;
*** ERROR C202 IN LINE 22 OF Source\EEPROM.c: 'IAP_ADDRL': undefined identifier
  23   1      }
  24          
  25          /*----------------------------
  26          从ISP/IAP/EEPROM区域读取一字节
  27          ----------------------------*/
  28          unsigned char IapReadByte(unsigned int addr)
  29          {
  30   1          unsigned char dat;                       //数据缓冲区
  31   1      
  32   1          IAP_CONTR = ENABLE_IAP;         //使能IAP
*** ERROR C202 IN LINE 32 OF Source\EEPROM.c: 'IAP_CONTR': undefined identifier
  33   1          IAP_CMD = CMD_READ;             //设置IAP命令
*** ERROR C202 IN LINE 33 OF Source\EEPROM.c: 'IAP_CMD': undefined identifier
  34   1          IAP_ADDRL = addr;               //设置IAP低地址
*** ERROR C202 IN LINE 34 OF Source\EEPROM.c: 'IAP_ADDRL': undefined identifier
  35   1          IAP_ADDRH = addr >> 8;          //设置IAP高地址
*** ERROR C202 IN LINE 35 OF Source\EEPROM.c: 'IAP_ADDRH': undefined identifier
  36   1          IAP_TRIG = 0x5a;                //写触发命令(0x5a)
*** ERROR C202 IN LINE 36 OF Source\EEPROM.c: 'IAP_TRIG': undefined identifier
  37   1          IAP_TRIG = 0xa5;                //写触发命令(0xa5)
*** ERROR C202 IN LINE 37 OF Source\EEPROM.c: 'IAP_TRIG': undefined identifier
  38   1          _nop_();                        //等待ISP/IAP/EEPROM操作完成
  39   1          dat = IAP_DATA;                 //读ISP/IAP/EEPROM数据
*** ERROR C202 IN LINE 39 OF Source\EEPROM.c: 'IAP_DATA': undefined identifier
  40   1          IapIdle();                      //关闭IAP功能
C51 COMPILER V9.56.0.0   EEPROM                                                            10/17/2022 09:56:18 PAGE 2   

  41   1          return dat;                     //返回
  42   1      }
  43          
  44          /*----------------------------
  45          写一字节数据到ISP/IAP/EEPROM区域
  46          ----------------------------*/
  47          void IapWriteByte(unsigned int addr, unsigned char dat)
  48          {
  49   1          IAP_CONTR = ENABLE_IAP;         //使能IAP
*** ERROR C202 IN LINE 49 OF Source\EEPROM.c: 'IAP_CONTR': undefined identifier
  50   1          IAP_CMD = CMD_PROGRAM;          //设置IAP命令
*** ERROR C202 IN LINE 50 OF Source\EEPROM.c: 'IAP_CMD': undefined identifier
  51   1          IAP_ADDRL = addr;               //设置IAP低地址
*** ERROR C202 IN LINE 51 OF Source\EEPROM.c: 'IAP_ADDRL': undefined identifier
  52   1          IAP_ADDRH = addr >> 8;          //设置IAP高地址
*** ERROR C202 IN LINE 52 OF Source\EEPROM.c: 'IAP_ADDRH': undefined identifier
  53   1          IAP_DATA = dat;                 //写ISP/IAP/EEPROM数据
*** ERROR C202 IN LINE 53 OF Source\EEPROM.c: 'IAP_DATA': undefined identifier
  54   1          IAP_TRIG = 0x5a;                //写触发命令(0x5a)
*** ERROR C202 IN LINE 54 OF Source\EEPROM.c: 'IAP_TRIG': undefined identifier
  55   1          IAP_TRIG = 0xa5;                //写触发命令(0xa5)
*** ERROR C202 IN LINE 55 OF Source\EEPROM.c: 'IAP_TRIG': undefined identifier
  56   1          _nop_();                        //等待ISP/IAP/EEPROM操作完成
  57   1          IapIdle();
  58   1      }
  59          
  60          /*----------------------------
  61          扇区擦除
  62          ----------------------------*/
  63          void IapEraseSector(unsigned int addr)
  64          {
  65   1          IAP_CONTR = ENABLE_IAP;         //使能IAP
*** ERROR C202 IN LINE 65 OF Source\EEPROM.c: 'IAP_CONTR': undefined identifier
  66   1          IAP_CMD = CMD_ERASE;            //设置IAP命令
*** ERROR C202 IN LINE 66 OF Source\EEPROM.c: 'IAP_CMD': undefined identifier
  67   1          IAP_ADDRL = addr;               //设置IAP低地址
*** ERROR C202 IN LINE 67 OF Source\EEPROM.c: 'IAP_ADDRL': undefined identifier
  68   1          IAP_ADDRH = addr >> 8;          //设置IAP高地址
*** ERROR C202 IN LINE 68 OF Source\EEPROM.c: 'IAP_ADDRH': undefined identifier
  69   1          IAP_TRIG = 0x5a;                //写触发命令(0x5a)
*** ERROR C202 IN LINE 69 OF Source\EEPROM.c: 'IAP_TRIG': undefined identifier
  70   1          IAP_TRIG = 0xa5;                //写触发命令(0xa5)
*** ERROR C202 IN LINE 70 OF Source\EEPROM.c: 'IAP_TRIG': undefined identifier
  71   1          _nop_();                        //等待ISP/IAP/EEPROM操作完成
  72   1          IapIdle();
  73   1      }
  74          

C51 COMPILATION COMPLETE.  2 WARNING(S),  25 ERROR(S)
